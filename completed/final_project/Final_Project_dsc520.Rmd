---
title: "Final Project - Justice & Legal System Analysis by States"
author: "Patkhedkar Ninad"
date: '2020-11-19'
output:
  word_document: default
  pdf_document: default
  html_document: default
---

# Introduction
Effective Law and Order is one of the most important necessity of society. It has direct effect on living standard and crime rate in that area. The whole Law and Order system consists of multiple functions like   police protection services, court and civil functions and correction functions.  To effectively govern any  area, all these functions need resources i.e. people to perform duties and funding. 

In this project I will use public dataset about state wise employment and expenditures on various functions, like police protection services, judicial and civil services, correction services like prisons, facilities for the confinement, treatment, and the rehabilitation etc.  I will investigate and find more information about how effectively Justice and Legal system is managed in different states.  I will also try to find any correlation between population of state, expenses and  number of employees etc.

# Problem Statement Addressed
What are the factors that affect overall cost of Justice & Legal system?

## Research Questions
1. How state population affects overall cost and per capita cost?
2. What is proportion of employees in police functions and judicial functions? 
3. Does some state rely more on part-time workers than full time workers? 
4. Which states pays attractive salaries to police employyes?

# Data
**Dataset source** - Public data set for fiscal 2016 from Bureau of Justice Statistics Justice Expenditure and Employment Extracts 
 
**Dataset description** - Presents estimates of government expenditures and employment at the state level for the following justice categories: police protection (the function of enforcing the law), all judicial and legal functions (including prosecution, courts, and public defense), and corrections

**Dataset files**  
1. [jeee16t03.csv](https://data.world/usbjs/justice-expenditure-and-employment-2016/workspace/file?filename=jeee16t03.csv) - Percent distribution of expenditure for the justice system by type of government  
2. [jeee16t08](https://data.world/usbjs/justice-expenditure-and-employment-2016/workspace/file?filename=jeee16t08.csv) - Per capita justice expenditure and full-time equivalent justice employment per 10,000 population  
3. [jeee16t11.csv](https://data.world/usbjs/justice-expenditure-and-employment-2016/workspace/file?filename=jeee16t11.csv) - Justice system employment and payrolls of state governments  


For Definitions, Methodology and other information, refer detailed guide - https://www.bjs.gov/content/pub/pdf/jeeeguide.pdf

# How you addressed this problem statement
First I will clean each dataset file and create a consolidated dataset. Then I will identify and filter variables of interest. I will generate correlation,linear regression, and basic summary ﬁndings. I will plot my ﬁndings to visualize the data results.

My initial hypothesis is population increases overall cost but should decrese per capita cost.

# Data Prep
I will cleaup each data set and and create a consolidated dataset by "State" in this section. Here are few things I will perform as part of cleanup  
* Simplify column names by coverting to lower case and spaces replaced by underscores
* Rename long colunmn names e.g. population_2016_thousands to population_k
* Remove records of Total federal govt, Local city govt, Muncipalty govt data and keep only State data
* Remove records where population is not present
* Trim State abbreviations from records i.e. Virginia (VA) -> Virginia
```{r, message=FALSE, warning=FALSE, echo = TRUE}
library("dplyr")
library("janitor")
library("skimr")
library("ggplot2")
library("knitr")

options("width"=200)
options(scipen=999)
setwd("/home/npatkhe/dsc520/completed/final_project")
# cleanup jeee16t03.csv
df_jee03 <- read.csv("jeee16t03.csv")
df_jee03 <- df_jee03 %>% clean_names() %>%
              rename(state = state_and_type_of_government) %>%
              rename(population_k = population_2016_thousands)
df_jee03 <- df_jee03 %>% filter(population_k != "-")
df_jee03$population_k <- suppressWarnings(as.numeric(as.character(df_jee03$population_k)))
df_jee03 <- df_jee03[-1,]
df_jee03$state <- sub("\\(.*", "",df_jee03$state )
trim <- function (x) gsub("^\\s+|\\s+$", "", x)
df_jee03$state <- trim(df_jee03$state)
# clean up jeee16t08.csv
df_jee08 <- read.csv("jeee16t08.csv")
df_jee08 <-df_jee08 %>% clean_names() %>%
               rename(population = population_2016)
df_jee08 <-filter(df_jee08, state != "Total")
# cleanup jeee16t11.csv
df_jee11 <- read.csv("jeee16t11.csv")
df_jee11 <- df_jee11 %>% clean_names() %>% filter(state != "Total")
df_jee11$pp_average_earnings <- suppressWarnings(as.numeric(as.character(df_jee11$pp_average_earnings)))
df_jee11 <- na.omit(df_jee11)
```

Now consolidate the dataset by joining on State field.
```{r, message=FALSE, warning=FALSE, echo = TRUE}
df_consolidated <- inner_join(df_jee08, df_jee03, by = "state")
df_consolidated <- inner_join(df_consolidated, df_jee11, by = "state")
```
We got 2 population fields in consolidated dataset.  
*population_k*  - represents population of state in thousands ...basically round figure(k - stands for 1000)  
*population* -  represents actual count of population  
We will keep field which represents population in thousands as its easy to follow for analysis. We will drop other population field.
```{r, message=FALSE, warning=FALSE, echo = TRUE}
df_consolidated <- df_consolidated %>% select(-c(population))
```

Now we have total 49 Observations and 41 variables in consolidated dataset. I have identified below variables for my analysis work. These variables are from all 3 different files used.  

* *state* - US state name  
* *population_k* - Population in thousands  
* *total_direct_expenditure* - Total expenditure in Thousands Dollars
* *total_justice_system_pc* - Per capita (10,000 population) cost in Dollars for justice system which include police, judicial and civil, correction functions  
* *pp_total_employees* - Police protection system employees  
* *jl_total_employees* - Judicial and Legal system employees  
* *pp_average_earnings* - Police protection average earnings in Dollars

So overall data selected for analysis looks like as below
```{r, message=FALSE, warning=FALSE, echo = TRUE}
df_consolidated <- df_consolidated %>% select(c(state,population_k,total_direct_expenditure,total_justice_system_pc,pp_total_employees,jl_total_employees,pp_average_earnings))
kable(df_consolidated, caption="Justice and Legal System - 2016")
str(df_consolidated)
summary(df_consolidated)
```



